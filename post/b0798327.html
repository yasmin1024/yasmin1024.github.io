<!DOCTYPE html><html lang="zh-CN" data-theme="light"><head><meta charset="UTF-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width, initial-scale=1.0,viewport-fit=cover"><title>SpringBooté›†æˆMybatiså’ŒQuartzå®ç°é…ç½®å¤šæ•°æ®æºçš„å®šæ—¶è°ƒåº¦ä»»åŠ¡é¡¹ç›® | å†°ç³–è‚¥è‚ é¼“æŒğŸ‘</title><meta name="author" content="yasmin1024"><meta name="copyright" content="yasmin1024"><meta name="format-detection" content="telephone=no"><meta name="theme-color" content="#ffffff"><meta name="description" content="è¿™ç¯‡æ–‡ç« æ˜¯ä¸ºäº†è®°å½•è‡ªå·±å®ç°è¿™ä¸ªDemoçš„è¿‡ç¨‹ã€‚ æ¶‰åŠåˆ°SpringBootï¼ŒMybatisï¼ŒQuartzï¼ŒMysqlï¼ŒDruidï¼Œæ—¥å¿—æ¡†æ¶ä½¿ç”¨SpringBooté»˜è®¤é›†æˆçš„logback 1.ä½¿ç”¨Mavenæ„å»ºå¤šæ¨¡å—é¡¹ç›®Mavenå¤šæ¨¡å—é¡¹ç›®é€šè¿‡åˆç†çš„æ¨¡å—æ‹†åˆ†ï¼Œå®ç°äº†ä»£ç çš„å¤ç”¨ï¼Œä¾¿äºç»´æŠ¤å’Œç®¡ç†ã€‚æ³¨æ„çˆ¶Mavenå·¥ç¨‹ä¸­çš„pomæ–‡ä»¶æŒ‡å®šçš„æ‰“åŒ…ç±»å‹å¿…é¡»ä¸ºpomï¼Œå­æ¨¡å—çš„æ‰“åŒ…ç±»å‹éœ€è¦æŒ‡å®šä¸ºjarï¼Œè€Œå­æ¨¡å—ä¹Ÿ">
<meta property="og:type" content="article">
<meta property="og:title" content="SpringBooté›†æˆMybatiså’ŒQuartzå®ç°é…ç½®å¤šæ•°æ®æºçš„å®šæ—¶è°ƒåº¦ä»»åŠ¡é¡¹ç›®">
<meta property="og:url" content="http://example.com/post/b0798327.html">
<meta property="og:site_name" content="å†°ç³–è‚¥è‚ é¼“æŒğŸ‘">
<meta property="og:description" content="è¿™ç¯‡æ–‡ç« æ˜¯ä¸ºäº†è®°å½•è‡ªå·±å®ç°è¿™ä¸ªDemoçš„è¿‡ç¨‹ã€‚ æ¶‰åŠåˆ°SpringBootï¼ŒMybatisï¼ŒQuartzï¼ŒMysqlï¼ŒDruidï¼Œæ—¥å¿—æ¡†æ¶ä½¿ç”¨SpringBooté»˜è®¤é›†æˆçš„logback 1.ä½¿ç”¨Mavenæ„å»ºå¤šæ¨¡å—é¡¹ç›®Mavenå¤šæ¨¡å—é¡¹ç›®é€šè¿‡åˆç†çš„æ¨¡å—æ‹†åˆ†ï¼Œå®ç°äº†ä»£ç çš„å¤ç”¨ï¼Œä¾¿äºç»´æŠ¤å’Œç®¡ç†ã€‚æ³¨æ„çˆ¶Mavenå·¥ç¨‹ä¸­çš„pomæ–‡ä»¶æŒ‡å®šçš„æ‰“åŒ…ç±»å‹å¿…é¡»ä¸ºpomï¼Œå­æ¨¡å—çš„æ‰“åŒ…ç±»å‹éœ€è¦æŒ‡å®šä¸ºjarï¼Œè€Œå­æ¨¡å—ä¹Ÿ">
<meta property="og:locale" content="zh_CN">
<meta property="og:image" content="http://example.com/image/avatar.jpg">
<meta property="article:published_time" content="2023-04-26T09:54:28.000Z">
<meta property="article:modified_time" content="2023-05-03T17:11:40.801Z">
<meta property="article:author" content="yasmin1024">
<meta property="article:tag" content="SpringBoot">
<meta property="article:tag" content="Quartz">
<meta property="article:tag" content="Mybatis">
<meta property="article:tag" content="Druid">
<meta property="article:tag" content="å¤šæ•°æ®æºé…ç½®">
<meta name="twitter:card" content="summary">
<meta name="twitter:image" content="http://example.com/image/avatar.jpg"><link rel="shortcut icon" href="/image/favicon.png"><link rel="canonical" href="http://example.com/post/b0798327.html"><link rel="preconnect" href="//cdn.jsdelivr.net"/><link rel="stylesheet" href="/css/index.css"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@fortawesome/fontawesome-free/css/all.min.css" media="print" onload="this.media='all'"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@fancyapps/ui/dist/fancybox/fancybox.min.css" media="print" onload="this.media='all'"><script>const GLOBAL_CONFIG = { 
  root: '/',
  algolia: undefined,
  localSearch: undefined,
  translate: undefined,
  noticeOutdate: undefined,
  highlight: {"plugin":"highlighjs","highlightCopy":true,"highlightLang":true,"highlightHeightLimit":false},
  copy: {
    success: 'å¤åˆ¶æˆåŠŸ',
    error: 'å¤åˆ¶é”™è¯¯',
    noSupport: 'æµè§ˆå™¨ä¸æ”¯æŒ'
  },
  relativeDate: {
    homepage: false,
    post: false
  },
  runtime: '',
  dateSuffix: {
    just: 'åˆšåˆš',
    min: 'åˆ†é’Ÿå‰',
    hour: 'å°æ—¶å‰',
    day: 'å¤©å‰',
    month: 'ä¸ªæœˆå‰'
  },
  copyright: undefined,
  lightbox: 'fancybox',
  Snackbar: undefined,
  source: {
    justifiedGallery: {
      js: 'https://cdn.jsdelivr.net/npm/flickr-justified-gallery/dist/fjGallery.min.js',
      css: 'https://cdn.jsdelivr.net/npm/flickr-justified-gallery/dist/fjGallery.min.css'
    }
  },
  isPhotoFigcaption: false,
  islazyload: false,
  isAnchor: false,
  percent: {
    toc: true,
    rightside: false,
  }
}</script><script id="config-diff">var GLOBAL_CONFIG_SITE = {
  title: 'SpringBooté›†æˆMybatiså’ŒQuartzå®ç°é…ç½®å¤šæ•°æ®æºçš„å®šæ—¶è°ƒåº¦ä»»åŠ¡é¡¹ç›®',
  isPost: true,
  isHome: false,
  isHighlightShrink: false,
  isToc: true,
  postUpdate: '2023-05-04 01:11:40'
}</script><noscript><style type="text/css">
  #nav {
    opacity: 1
  }
  .justified-gallery img {
    opacity: 1
  }

  #recent-posts time,
  #post-meta time {
    display: inline !important
  }
</style></noscript><script>(win=>{
    win.saveToLocal = {
      set: function setWithExpiry(key, value, ttl) {
        if (ttl === 0) return
        const now = new Date()
        const expiryDay = ttl * 86400000
        const item = {
          value: value,
          expiry: now.getTime() + expiryDay,
        }
        localStorage.setItem(key, JSON.stringify(item))
      },

      get: function getWithExpiry(key) {
        const itemStr = localStorage.getItem(key)

        if (!itemStr) {
          return undefined
        }
        const item = JSON.parse(itemStr)
        const now = new Date()

        if (now.getTime() > item.expiry) {
          localStorage.removeItem(key)
          return undefined
        }
        return item.value
      }
    }
  
    win.getScript = url => new Promise((resolve, reject) => {
      const script = document.createElement('script')
      script.src = url
      script.async = true
      script.onerror = reject
      script.onload = script.onreadystatechange = function() {
        const loadState = this.readyState
        if (loadState && loadState !== 'loaded' && loadState !== 'complete') return
        script.onload = script.onreadystatechange = null
        resolve()
      }
      document.head.appendChild(script)
    })
  
    win.getCSS = (url,id = false) => new Promise((resolve, reject) => {
      const link = document.createElement('link')
      link.rel = 'stylesheet'
      link.href = url
      if (id) link.id = id
      link.onerror = reject
      link.onload = link.onreadystatechange = function() {
        const loadState = this.readyState
        if (loadState && loadState !== 'loaded' && loadState !== 'complete') return
        link.onload = link.onreadystatechange = null
        resolve()
      }
      document.head.appendChild(link)
    })
  
      win.activateDarkMode = function () {
        document.documentElement.setAttribute('data-theme', 'dark')
        if (document.querySelector('meta[name="theme-color"]') !== null) {
          document.querySelector('meta[name="theme-color"]').setAttribute('content', '#0d0d0d')
        }
      }
      win.activateLightMode = function () {
        document.documentElement.setAttribute('data-theme', 'light')
        if (document.querySelector('meta[name="theme-color"]') !== null) {
          document.querySelector('meta[name="theme-color"]').setAttribute('content', '#ffffff')
        }
      }
      const t = saveToLocal.get('theme')
    
          if (t === 'dark') activateDarkMode()
          else if (t === 'light') activateLightMode()
        
      const asideStatus = saveToLocal.get('aside-status')
      if (asideStatus !== undefined) {
        if (asideStatus === 'hide') {
          document.documentElement.classList.add('hide-aside')
        } else {
          document.documentElement.classList.remove('hide-aside')
        }
      }
    
    const detectApple = () => {
      if(/iPad|iPhone|iPod|Macintosh/.test(navigator.userAgent)){
        document.documentElement.classList.add('apple')
      }
    }
    detectApple()
    })(window)</script><link rel="stylesheet" href="/css/backgroundcolor.css"><link rel="stylesheet" href="/css/wave.css"><link rel="stylesheet" href="/css/custom.css"><link rel="stylesheet" href="/css/color.css"><meta name="generator" content="Hexo 6.3.0"></head><body><div id="web_bg"></div><div id="sidebar"><div id="menu-mask"></div><div id="sidebar-menus"><div class="avatar-img is-center"><img src="/image/avatar.jpg" onerror="onerror=null;src='/img/friend_404.gif'" alt="avatar"/></div><div class="sidebar-site-data site-data is-center"><a href="/archives/"><div class="headline">æ–‡ç« </div><div class="length-num">3</div></a><a href="/tags/"><div class="headline">æ ‡ç­¾</div><div class="length-num">8</div></a><a href="/categories/"><div class="headline">åˆ†ç±»</div><div class="length-num">1</div></a></div><hr/><div class="menus_items"><div class="menus_item"><a class="site-page" href="/"><i class="fa-fw fas fa-home"></i><span> ä¸»é¡µ</span></a></div><div class="menus_item"><a class="site-page" href="/archives/"><i class="fa-fw fas fa-archive"></i><span> å½’æ¡£</span></a></div><div class="menus_item"><a class="site-page" href="/tags/"><i class="fa-fw fas fa-tags"></i><span> æ ‡ç­¾</span></a></div><div class="menus_item"><a class="site-page" href="/categories/"><i class="fa-fw fas fa-folder-open"></i><span> åˆ†ç±»</span></a></div></div></div></div><div class="post" id="body-wrap"><header class="post-bg" id="page-header" style="background-image: url('/image/topimg.jpg')"><nav id="nav"><span id="blog-info"><a href="/" title="å†°ç³–è‚¥è‚ é¼“æŒğŸ‘"><span class="site-name">å†°ç³–è‚¥è‚ é¼“æŒğŸ‘</span></a></span><div id="menus"><div class="menus_items"><div class="menus_item"><a class="site-page" href="/"><i class="fa-fw fas fa-home"></i><span> ä¸»é¡µ</span></a></div><div class="menus_item"><a class="site-page" href="/archives/"><i class="fa-fw fas fa-archive"></i><span> å½’æ¡£</span></a></div><div class="menus_item"><a class="site-page" href="/tags/"><i class="fa-fw fas fa-tags"></i><span> æ ‡ç­¾</span></a></div><div class="menus_item"><a class="site-page" href="/categories/"><i class="fa-fw fas fa-folder-open"></i><span> åˆ†ç±»</span></a></div></div><div id="toggle-menu"><a class="site-page" href="javascript:void(0);"><i class="fas fa-bars fa-fw"></i></a></div></div></nav><div id="post-info"><h1 class="post-title">SpringBooté›†æˆMybatiså’ŒQuartzå®ç°é…ç½®å¤šæ•°æ®æºçš„å®šæ—¶è°ƒåº¦ä»»åŠ¡é¡¹ç›®</h1><div id="post-meta"><div class="meta-firstline"><span class="post-meta-date"><i class="far fa-calendar-alt fa-fw post-meta-icon"></i><span class="post-meta-label">å‘è¡¨äº</span><time class="post-meta-date-created" datetime="2023-04-26T09:54:28.000Z" title="å‘è¡¨äº 2023-04-26 17:54:28">2023-04-26</time><span class="post-meta-separator">|</span><i class="fas fa-history fa-fw post-meta-icon"></i><span class="post-meta-label">æ›´æ–°äº</span><time class="post-meta-date-updated" datetime="2023-05-03T17:11:40.801Z" title="æ›´æ–°äº 2023-05-04 01:11:40">2023-05-04</time></span><span class="post-meta-categories"><span class="post-meta-separator">|</span><i class="fas fa-inbox fa-fw post-meta-icon"></i><a class="post-meta-categories" href="/categories/Java%E5%AD%A6%E4%B9%A0/">Javaå­¦ä¹ </a></span></div><div class="meta-secondline"><span class="post-meta-separator">|</span><span class="post-meta-wordcount"><i class="far fa-file-word fa-fw post-meta-icon"></i><span class="post-meta-label">å­—æ•°æ€»è®¡:</span><span class="word-count">5.2k</span><span class="post-meta-separator">|</span><i class="far fa-clock fa-fw post-meta-icon"></i><span class="post-meta-label">é˜…è¯»æ—¶é•¿:</span><span>24åˆ†é’Ÿ</span></span></div></div></div><section class="main-hero-waves-area waves-area"><svg class="waves-svg" xmlns="http://www.w3.org/2000/svg" xlink="http://www.w3.org/1999/xlink" viewBox="0 24 150 28" preserveAspectRatio="none" shape-rendering="auto"><defs><path id="gentle-wave" d="M -160 44 c 30 0 58 -18 88 -18 s 58 18 88 18 s 58 -18 88 -18 s 58 18 88 18 v 44 h -352 Z"></path></defs><g class="parallax"><use href="#gentle-wave" x="48" y="0"></use><use href="#gentle-wave" x="48" y="3"></use><use href="#gentle-wave" x="48" y="5"></use><use href="#gentle-wave" x="48" y="7"></use></g></svg></section></header><main class="layout" id="content-inner"><div id="post"><article class="post-content" id="article-container"><p>è¿™ç¯‡æ–‡ç« æ˜¯ä¸ºäº†è®°å½•è‡ªå·±å®ç°è¿™ä¸ªDemoçš„è¿‡ç¨‹ã€‚</p>
<p>æ¶‰åŠåˆ°SpringBootï¼ŒMybatisï¼ŒQuartzï¼ŒMysqlï¼ŒDruidï¼Œæ—¥å¿—æ¡†æ¶ä½¿ç”¨SpringBooté»˜è®¤é›†æˆçš„logback</p>
<h1 id="1-ä½¿ç”¨Mavenæ„å»ºå¤šæ¨¡å—é¡¹ç›®"><a href="#1-ä½¿ç”¨Mavenæ„å»ºå¤šæ¨¡å—é¡¹ç›®" class="headerlink" title="1.ä½¿ç”¨Mavenæ„å»ºå¤šæ¨¡å—é¡¹ç›®"></a>1.ä½¿ç”¨Mavenæ„å»ºå¤šæ¨¡å—é¡¹ç›®</h1><p>Mavenå¤šæ¨¡å—é¡¹ç›®é€šè¿‡åˆç†çš„æ¨¡å—æ‹†åˆ†ï¼Œå®ç°äº†ä»£ç çš„å¤ç”¨ï¼Œä¾¿äºç»´æŠ¤å’Œç®¡ç†ã€‚<br>æ³¨æ„çˆ¶Mavenå·¥ç¨‹ä¸­çš„pomæ–‡ä»¶æŒ‡å®šçš„æ‰“åŒ…ç±»å‹å¿…é¡»ä¸ºpomï¼Œå­æ¨¡å—çš„æ‰“åŒ…ç±»å‹éœ€è¦æŒ‡å®šä¸ºjarï¼Œè€Œå­æ¨¡å—ä¹Ÿéœ€è¦åœ¨çˆ¶pomæ–‡ä»¶ä¸­å£°æ˜</p>
<p>é¡¹ç›®ç»“æ„å¦‚ä¸‹ï¼š</p>
<ul>
<li>MultDataSourceSchedule  çˆ¶å·¥ç¨‹<ul>
<li>common  å…¬å…±æ¨¡å—ï¼Œç®¡ç†å·¥å…·ç±»ã€é…ç½®ä¿¡æ¯è¯»å–ç­‰</li>
<li>dao  æŒä¹…åŒ–æ¨¡å—ï¼Œä¸æ•°æ®åº“äº¤äº’</li>
<li>scheduleproject  å®šæ—¶ä»»åŠ¡è°ƒåº¦ä¸šåŠ¡æ¨¡å—</li>
<li>config  é…ç½®æ–‡ä»¶ç®¡ç†åŒ…ï¼Œå­˜æ”¾å„ç§é…ç½®æ–‡ä»¶</li>
</ul>
</li>
</ul>
<p>å…¶ä¸­commonä¸ºåŸºç¡€æ¨¡å—ï¼Œå¯æ ¹æ®å®é™…éœ€è¦å¼•å…¥redisï¼Œslf4jç­‰ã€‚</p>
<p>daoä¸scheduleprojectéƒ½éœ€è¦ä¾èµ–commonï¼Œscheduleprojectè¿˜éœ€è¦ä¾èµ–daoã€‚</p>
<p>ç”±äºMavenå…·æœ‰ä¼ é€’ä¾èµ–æœºåˆ¶ï¼Œdaoå¼•å…¥ä¾èµ–commonï¼Œscheduleprojectå¼•å…¥ä¾èµ–daoï¼Œè¿™æ—¶scheduleprojectä¸­ä¼šåŒæ ·å¼•å…¥commonï¼Œå› æ­¤scheduleprojectæ— éœ€é‡å¤å¼•å…¥ä¾èµ–commonã€‚</p>
<h2 id="1-1-åˆ›å»ºçˆ¶mavenå·¥ç¨‹"><a href="#1-1-åˆ›å»ºçˆ¶mavenå·¥ç¨‹" class="headerlink" title="1.1 åˆ›å»ºçˆ¶mavenå·¥ç¨‹"></a>1.1 åˆ›å»ºçˆ¶mavenå·¥ç¨‹</h2><p>åˆ›å»ºå®Œæˆåï¼Œåˆ é™¤æ‰srcåŒ…ï¼Œçˆ¶å·¥ç¨‹ä¸­æ— éœ€å†™ä»£ç ï¼Œåªéœ€è¦é…ç½®pomæ–‡ä»¶ã€‚<br><img src="https://raw.githubusercontent.com/yasmin1024/hexoBlogImgRepository/main/postImg/01/createParentMaven.png"></p>
<h2 id="1-2-åˆ›å»ºå­æ¨¡å—"><a href="#1-2-åˆ›å»ºå­æ¨¡å—" class="headerlink" title="1.2 åˆ›å»ºå­æ¨¡å—"></a>1.2 åˆ›å»ºå­æ¨¡å—</h2><p>çˆ¶å·¥ç¨‹ä¸Šå³é”® â†’ new â†’ Module  é€‰æ‹©Spring Initaializr ,æ³¨æ„JDKç‰ˆæœ¬ä¸javaç‰ˆæœ¬è¦å¯¹åº”ã€‚</p>
<p><img src="https://raw.githubusercontent.com/yasmin1024/hexoBlogImgRepository/main/postImg/01/creatSonModule.png"></p>
<p>ä¾èµ–é¡¹é€‰æ‹©Spring Webã€‚é‡ç‚¹æ³¨æ„â—â—â— <em><strong><font color= red>SpringBootç‰ˆæœ¬çš„é€‰æ‹©ï¼Œ3.xçš„ç‰ˆæœ¬ä¸æ”¯æŒjdk1.8ï¼Œå› æ­¤ä½¿ç”¨jdk1.8éœ€è¦é€‰æ‹©2.xçš„ç‰ˆæœ¬æ¥ä½¿ç”¨</font></strong></em></p>
<p><img src="https://raw.githubusercontent.com/yasmin1024/hexoBlogImgRepository/main/postImg/01/creat-important.png"></p>
<p>ç»§ç»­åˆ›å»ºcommonæ¨¡å—å’Œdaoæ¨¡å—ï¼Œæ­¤æ—¶å¯ä»¥ä¸ç”¨å†åˆ›å»ºSpringé¡¹ç›®äº†ï¼Œçˆ¶å·¥ç¨‹ä¸Šå³é”® â†’ new â†’ Module  é€‰æ‹©  æ–°å»ºæ¨¡å—</p>
<p><img src="https://raw.githubusercontent.com/yasmin1024/hexoBlogImgRepository/main/postImg/01/creatcommon.png"></p>
<p>æ¥ä¸‹æ¥åœ¨çˆ¶å·¥ç¨‹ä¸‹åˆ›å»ºä¸€ä¸ªfolderï¼Œçˆ¶å·¥ç¨‹ä¸Šå³é”® â†’ new â†’ Folderï¼Œè¾“å…¥åç§°configï¼Œæ­¤æ—¶é¡¹ç›®ç»“æ„å¦‚ä¸‹</p>
<p><img src="https://raw.githubusercontent.com/yasmin1024/hexoBlogImgRepository/main/postImg/01/createResult.png"><br>æœ€ååˆ é™¤æ‰commonæ¨¡å—å’Œdaoæ¨¡å—ä¸­çš„Applicationå¯åŠ¨é¡¹ï¼Œåˆ é™¤commonã€daoã€scheduleprojectæ¨¡å—ä¸­resourceä¸‹çš„application.properties</p>
<p>åœ¨configä¸‹æ–°å»ºæ–‡ä»¶ï¼Œå‘½åä¸ºapplication.propertiesï¼Œç›¸å…³é…ç½®ä¿¡æ¯å†™åœ¨è¿™ä¸ªæ–‡ä»¶ä¸­</p>
<h2 id="1-3-å»ºç«‹ä¾èµ–"><a href="#1-3-å»ºç«‹ä¾èµ–" class="headerlink" title="1.3 å»ºç«‹ä¾èµ–"></a>1.3 å»ºç«‹ä¾èµ–</h2><h3 id="1-3-1-çˆ¶å·¥ç¨‹pom-xml"><a href="#1-3-1-çˆ¶å·¥ç¨‹pom-xml" class="headerlink" title="1.3.1 çˆ¶å·¥ç¨‹pom.xml"></a>1.3.1 çˆ¶å·¥ç¨‹pom.xml</h3><p><code>&lt;parent&gt;.....&lt;/parent&gt;</code>è¿™éƒ¨åˆ†å†…å®¹å¯ä»¥ç›´æ¥ä»scheduleproject&#x2F;pom.xmlä¸­å¤åˆ¶è¿‡æ¥</p>
<p><code>&lt;packaging&gt;pom&lt;/packaging&gt;</code>çˆ¶å·¥ç¨‹éœ€è¦æŒ‡å®šæ‰“åŒ…æ–¹å¼ä¸ºpom</p>
 <figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br></pre></td><td class="code"><pre><span class="line">  <span class="meta">&lt;?xml version=<span class="string">&quot;1.0&quot;</span> encoding=<span class="string">&quot;UTF-8&quot;</span>?&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">project</span> <span class="attr">xmlns</span>=<span class="string">&quot;http://maven.apache.org/POM/4.0.0&quot;</span></span></span><br><span class="line"><span class="tag">         <span class="attr">xmlns:xsi</span>=<span class="string">&quot;http://www.w3.org/2001/XMLSchema-instance&quot;</span></span></span><br><span class="line"><span class="tag">         <span class="attr">xsi:schemaLocation</span>=<span class="string">&quot;http://maven.apache.org/POM/4.0.0 http://maven.apache.org/xsd/maven-4.0.0.xsd&quot;</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">modelVersion</span>&gt;</span>4.0.0<span class="tag">&lt;/<span class="name">modelVersion</span>&gt;</span></span><br><span class="line"></span><br><span class="line">    <span class="tag">&lt;<span class="name">parent</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.springframework.boot<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>spring-boot-starter-parent<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">version</span>&gt;</span>2.7.11<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">relativePath</span>/&gt;</span> <span class="comment">&lt;!-- lookup parent from repository --&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">parent</span>&gt;</span></span><br><span class="line"></span><br><span class="line">    <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>com.example<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>MultDataSourceSchedule<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">packaging</span>&gt;</span>pom<span class="tag">&lt;/<span class="name">packaging</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">version</span>&gt;</span>1.0-SNAPSHOT<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line"></span><br><span class="line">    <span class="comment">&lt;!--å£°æ˜å­æ¨¡å—--&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">modules</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">module</span>&gt;</span>common<span class="tag">&lt;/<span class="name">module</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">module</span>&gt;</span>ScheduleProject<span class="tag">&lt;/<span class="name">module</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">module</span>&gt;</span>DAO<span class="tag">&lt;/<span class="name">module</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">modules</span>&gt;</span></span><br><span class="line"></span><br><span class="line">    <span class="tag">&lt;<span class="name">build</span>&gt;</span></span><br><span class="line">        <span class="comment">&lt;!--é¡¹ç›®æ„å»ºåçš„åç§°--&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">finalName</span>&gt;</span>MultDataSourceSchedule<span class="tag">&lt;/<span class="name">finalName</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">plugins</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">plugin</span>&gt;</span></span><br><span class="line">                <span class="comment">&lt;!--spring bootæä¾›çš„mavenæ‰“åŒ…æ’ä»¶ï¼Œå¯ç›´æ¥æ‰“åŒ…æˆjaræˆ–war--&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.springframework.boot<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>spring-boot-maven-plugin<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">                <span class="comment">&lt;!--å¦‚æœè¿™é‡ŒæŠ¥é”™ï¼Œå°±æ‰¾æœ¬åœ°mavenä»“åº“ä¸‹ org\springframework\boot\spring-boot-starter-web çš„ç‰ˆæœ¬å·--&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">version</span>&gt;</span>2.7.11<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">configuration</span>&gt;</span></span><br><span class="line">                    <span class="comment">&lt;!--é¡¹ç›®çš„å¯åŠ¨ç±»--&gt;</span></span><br><span class="line">                    <span class="tag">&lt;<span class="name">mainClass</span>&gt;</span></span><br><span class="line">                        com.example.SchedualProject.SchedualProjectApplication</span><br><span class="line">                    <span class="tag">&lt;/<span class="name">mainClass</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;/<span class="name">configuration</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;/<span class="name">plugin</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">plugins</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">build</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;/<span class="name">project</span>&gt;</span></span><br></pre></td></tr></table></figure>

<h3 id="1-3-2-commonå­æ¨¡å—pom-xml"><a href="#1-3-2-commonå­æ¨¡å—pom-xml" class="headerlink" title="1.3.2 commonå­æ¨¡å—pom.xml"></a>1.3.2 commonå­æ¨¡å—pom.xml</h3><p><code>&lt;parent&gt;.....&lt;/parent&gt;</code>å£°æ˜çˆ¶æ¨¡å—ä¸ºMultDataSourceSchedule</p>
<p><code>&lt;packaging&gt;jar&lt;/packaging&gt;</code>æŒ‡å®šæ‰“åŒ…æ–¹å¼ä¸ºjar</p>
<p><code>&lt;classifier&gt;exec&lt;/classifier&gt;</code>è¿™é‡Œéœ€è¦æ³¨æ„ï¼Œä¸èƒ½æ¼æ‰ï¼Œå¦åˆ™ä¼šæŠ¥é”™</p>
<p><em><strong><font color= red>mavenå¤šé¡¹ç›®æ‰“åŒ…æŠ¥é”™â€”å­æ¨¡å—ç›¸äº’ä¾èµ–æ‰“åŒ…æ—¶æ‰€é‡åˆ°çš„é—®é¢˜:ä¾èµ–çš„ç¨‹åºåŒ…æ‰¾ä¸åˆ° package xxx does not exist</font></strong></em></p>
<p><strong>åŸå› ï¼šspring-boot-maven-pluginæ‰“åŒ…å‡ºçš„jaræ˜¯ä¸å¯ä¾èµ–çš„</strong></p>
<p>å®˜æ–¹ç»™å‡ºçš„è§£å†³æ–¹å¼å°±æ˜¯æ·»åŠ è¿™ä¸€è¡Œé…ç½®ï¼Œé‚£ä¹ˆæ‰“åŒ…æ—¶ä¼šç”Ÿæˆä¸¤ä¸ªjaråŒ…ï¼Œä¸€ä¸ªç”¨æ¥æ‰§è¡Œå³common-exec.jarï¼Œä¸€ä¸ªç”¨æ¥ä¾èµ–å³common.jar</p>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&lt;?xml version=<span class="string">&quot;1.0&quot;</span> encoding=<span class="string">&quot;UTF-8&quot;</span>?&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">project</span> <span class="attr">xmlns</span>=<span class="string">&quot;http://maven.apache.org/POM/4.0.0&quot;</span></span></span><br><span class="line"><span class="tag">         <span class="attr">xmlns:xsi</span>=<span class="string">&quot;http://www.w3.org/2001/XMLSchema-instance&quot;</span></span></span><br><span class="line"><span class="tag">         <span class="attr">xsi:schemaLocation</span>=<span class="string">&quot;http://maven.apache.org/POM/4.0.0 http://maven.apache.org/xsd/maven-4.0.0.xsd&quot;</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">parent</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>MultDataSourceSchedule<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>com.example<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">version</span>&gt;</span>1.0-SNAPSHOT<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">parent</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">modelVersion</span>&gt;</span>4.0.0<span class="tag">&lt;/<span class="name">modelVersion</span>&gt;</span></span><br><span class="line"></span><br><span class="line">    <span class="tag">&lt;<span class="name">name</span>&gt;</span>common<span class="tag">&lt;/<span class="name">name</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>common<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">packaging</span>&gt;</span>jar<span class="tag">&lt;/<span class="name">packaging</span>&gt;</span></span><br><span class="line"></span><br><span class="line">    <span class="tag">&lt;<span class="name">dependencies</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.springframework.boot<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>spring-boot-starter<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line"></span><br><span class="line">        <span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.slf4j<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>slf4j-api<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">version</span>&gt;</span>1.7.25<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>ch.qos.logback<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>logback-classic<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">version</span>&gt;</span>1.2.10<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line"></span><br><span class="line">    <span class="tag">&lt;/<span class="name">dependencies</span>&gt;</span></span><br><span class="line"></span><br><span class="line">    <span class="tag">&lt;<span class="name">build</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">plugins</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">plugin</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.springframework.boot<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>spring-boot-maven-plugin<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">                <span class="comment">&lt;!--å¦‚æœè¿™é‡ŒæŠ¥é”™ï¼Œå°±æ‰¾æœ¬åœ°mavenä»“åº“ä¸‹ org\springframework\boot\spring-boot-starter-web çš„ç‰ˆæœ¬å·--&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">version</span>&gt;</span>2.7.11<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">configuration</span>&gt;</span></span><br><span class="line">                    <span class="tag">&lt;<span class="name">classifier</span>&gt;</span>exec<span class="tag">&lt;/<span class="name">classifier</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;/<span class="name">configuration</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;/<span class="name">plugin</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">plugins</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">build</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;/<span class="name">project</span>&gt;</span></span><br><span class="line"></span><br></pre></td></tr></table></figure>

<h3 id="1-3-3-daoå­æ¨¡å—pom-xml"><a href="#1-3-3-daoå­æ¨¡å—pom-xml" class="headerlink" title="1.3.3 daoå­æ¨¡å—pom.xml"></a>1.3.3 daoå­æ¨¡å—pom.xml</h3><p>daoæ¨¡å—æ˜¯æŒä¹…åŒ–æ¨¡å—ï¼Œéœ€è¦å¼•å…¥Mysqlï¼ŒMybatisï¼ŒDruid</p>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&lt;?xml version=<span class="string">&quot;1.0&quot;</span> encoding=<span class="string">&quot;UTF-8&quot;</span>?&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">project</span> <span class="attr">xmlns:xsi</span>=<span class="string">&quot;http://www.w3.org/2001/XMLSchema-instance&quot;</span></span></span><br><span class="line"><span class="tag">         <span class="attr">xmlns</span>=<span class="string">&quot;http://maven.apache.org/POM/4.0.0&quot;</span></span></span><br><span class="line"><span class="tag">         <span class="attr">xsi:schemaLocation</span>=<span class="string">&quot;http://maven.apache.org/POM/4.0.0 http://maven.apache.org/xsd/maven-4.0.0.xsd&quot;</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">parent</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>MultDataSourceSchedule<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>com.example<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">version</span>&gt;</span>1.0-SNAPSHOT<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">parent</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">modelVersion</span>&gt;</span>4.0.0<span class="tag">&lt;/<span class="name">modelVersion</span>&gt;</span></span><br><span class="line"></span><br><span class="line">    <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>DAO<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">packaging</span>&gt;</span>jar<span class="tag">&lt;/<span class="name">packaging</span>&gt;</span></span><br><span class="line"></span><br><span class="line">    <span class="tag">&lt;<span class="name">name</span>&gt;</span>DAO<span class="tag">&lt;/<span class="name">name</span>&gt;</span></span><br><span class="line"></span><br><span class="line">    <span class="tag">&lt;<span class="name">dependencies</span>&gt;</span></span><br><span class="line">        <span class="comment">&lt;!-- https://mvnrepository.com/artifact/mysql/mysql-connector-java --&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>mysql<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>mysql-connector-java<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">version</span>&gt;</span>8.0.33<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line">        <span class="comment">&lt;!-- https://mvnrepository.com/artifact/com.alibaba/druid --&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>com.alibaba<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>druid<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">version</span>&gt;</span>1.2.17<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line"></span><br><span class="line">        <span class="comment">&lt;!-- https://mvnrepository.com/artifact/org.mybatis.spring.boot/mybatis-spring-boot-starter --&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.mybatis<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>mybatis<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">version</span>&gt;</span>3.4.6<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line"></span><br><span class="line">        <span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>com.example<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>common<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">version</span>&gt;</span>1.0-SNAPSHOT<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">dependencies</span>&gt;</span></span><br><span class="line"></span><br><span class="line">    <span class="tag">&lt;<span class="name">build</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">plugins</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">plugin</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.springframework.boot<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>spring-boot-maven-plugin<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">                <span class="comment">&lt;!--å¦‚æœè¿™é‡ŒæŠ¥é”™ï¼Œå°±æ‰¾æœ¬åœ°mavenä»“åº“ä¸‹ org\springframework\boot\spring-boot-starter-web çš„ç‰ˆæœ¬å·--&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">version</span>&gt;</span>2.7.11<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">configuration</span>&gt;</span></span><br><span class="line">                    <span class="tag">&lt;<span class="name">classifier</span>&gt;</span>exec<span class="tag">&lt;/<span class="name">classifier</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;/<span class="name">configuration</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;/<span class="name">plugin</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">plugins</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">build</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;/<span class="name">project</span>&gt;</span></span><br></pre></td></tr></table></figure>

<h3 id="1-3-4-ScheduleProjectæ¨¡å—pom-xml"><a href="#1-3-4-ScheduleProjectæ¨¡å—pom-xml" class="headerlink" title="1.3.4 ScheduleProjectæ¨¡å—pom.xml"></a>1.3.4 ScheduleProjectæ¨¡å—pom.xml</h3><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&lt;?xml version=<span class="string">&quot;1.0&quot;</span> encoding=<span class="string">&quot;UTF-8&quot;</span>?&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">project</span> <span class="attr">xmlns</span>=<span class="string">&quot;http://maven.apache.org/POM/4.0.0&quot;</span> <span class="attr">xmlns:xsi</span>=<span class="string">&quot;http://www.w3.org/2001/XMLSchema-instance&quot;</span></span></span><br><span class="line"><span class="tag">         <span class="attr">xsi:schemaLocation</span>=<span class="string">&quot;http://maven.apache.org/POM/4.0.0 https://maven.apache.org/xsd/maven-4.0.0.xsd&quot;</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">modelVersion</span>&gt;</span>4.0.0<span class="tag">&lt;/<span class="name">modelVersion</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">parent</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>MultDataSourceSchedule<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>com.example<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">version</span>&gt;</span>1.0-SNAPSHOT<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">parent</span>&gt;</span></span><br><span class="line"></span><br><span class="line">    <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>ScheduleProject<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">packaging</span>&gt;</span>jar<span class="tag">&lt;/<span class="name">packaging</span>&gt;</span></span><br><span class="line"></span><br><span class="line">    <span class="tag">&lt;<span class="name">version</span>&gt;</span>0.0.1-SNAPSHOT<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">name</span>&gt;</span>ScheduleProject<span class="tag">&lt;/<span class="name">name</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">description</span>&gt;</span>ScheduleProject<span class="tag">&lt;/<span class="name">description</span>&gt;</span></span><br><span class="line"></span><br><span class="line">    <span class="tag">&lt;<span class="name">properties</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">java.version</span>&gt;</span>8<span class="tag">&lt;/<span class="name">java.version</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">properties</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">dependencies</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.springframework.boot<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>spring-boot-starter-quartz<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.springframework.boot<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>spring-boot-starter-web<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line"></span><br><span class="line">        <span class="comment">&lt;!-- https://mvnrepository.com/artifact/org.springframework.boot/spring-boot-starter-aop --&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.springframework.boot<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>spring-boot-starter-aop<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line"></span><br><span class="line">        <span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>com.example<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>DAO<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">version</span>&gt;</span>1.0-SNAPSHOT<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">dependencies</span>&gt;</span></span><br><span class="line"></span><br><span class="line">    <span class="tag">&lt;<span class="name">build</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">plugins</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">plugin</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.springframework.boot<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>spring-boot-maven-plugin<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">                <span class="comment">&lt;!--å¦‚æœè¿™é‡ŒæŠ¥é”™ï¼Œå°±æ‰¾æœ¬åœ°mavenä»“åº“ä¸‹ org\springframework\boot\spring-boot-starter-web çš„ç‰ˆæœ¬å·--&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">version</span>&gt;</span>2.7.11<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;/<span class="name">plugin</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">plugins</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">build</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;/<span class="name">project</span>&gt;</span></span><br><span class="line"></span><br></pre></td></tr></table></figure>

<h1 id="2-Mybatis-Druidå®ç°å¤šæ•°æ®æºçš„åŠ¨æ€åˆ‡æ¢"><a href="#2-Mybatis-Druidå®ç°å¤šæ•°æ®æºçš„åŠ¨æ€åˆ‡æ¢" class="headerlink" title="2.Mybatis+Druidå®ç°å¤šæ•°æ®æºçš„åŠ¨æ€åˆ‡æ¢"></a>2.Mybatis+Druidå®ç°å¤šæ•°æ®æºçš„åŠ¨æ€åˆ‡æ¢</h1><p>åœ¨å¼€å‘è¿‡ç¨‹ä¸­ï¼Œä¸å¯é¿å…éœ€è¦å¯¹å¤šä¸ªæ•°æ®åº“è¿›è¡Œè¯»å†™çš„è¯·æ±‚ï¼Œä¸è®ºæ˜¯ä½¿ç”¨å¤‡åº“åšè¯»å†™åˆ†ç¦»ï¼Œè¿˜æ˜¯ä¸åŒä¸šåŠ¡æ•°æ®å­˜å‚¨åœ¨ä¸åŒçš„åº“ä¸­ï¼Œéƒ½éœ€è¦é…ç½®å¤šä¸ªæ•°æ®æºã€‚</p>
<p><a target="_blank" rel="noopener" href="https://github.com/alibaba/druid">Druid</a>æ˜¯æ¥æºäºé˜¿é‡Œçš„ä¸€ä¸ªå¼€æºçš„è¿æ¥æ± ï¼Œæä¾›äº†éå¸¸ä¼˜ç§€çš„ç›‘æ§å’Œæ‰©å±•åŠŸèƒ½ï¼Œè€Œä¸”ç›‘æ§ä¸å½±å“æ€§èƒ½ã€‚</p>
<p>æœ¬é¡¹ç›®å¯¹Mybatiså’ŒDruidçš„é…ç½®å…¨éƒ¨æ”¾åœ¨äº†xmlæ–‡ä»¶ä¸­ï¼Œä»¥é…ç½®ä¸¤ä¸ªæ•°æ®æºä¸ºä¾‹ã€‚</p>
<h2 id="2-1-Mybatisé…ç½®"><a href="#2-1-Mybatisé…ç½®" class="headerlink" title="2.1 Mybatisé…ç½®"></a>2.1 Mybatisé…ç½®</h2><p>é¦–å…ˆåœ¨configåŒ…ä¸‹æ–°å»ºmybatis-config.xmlå’Œmybatis-config-business.xmlï¼Œæ¯ä¸€ä¸ªæ–‡ä»¶ä¸­éƒ½é…ç½®ä¸€ä¸ªæ•°æ®åº“çš„ä¿¡æ¯</p>
<p><code>&lt;settings&gt;...&lt;/settings&gt;</code> å¯¹Mybatiséå¸¸é‡è¦çš„é…ç½®ï¼Œä¼šæ”¹å˜Mybatisçš„è¿è¡Œæ—¶è¡Œä¸ºï¼Œä¸èƒ½å‡ºç°æ‹¼å†™é”™è¯¯ï¼Œå¦åˆ™ä¼šæŠ¥é”™ï¼Œå…·ä½“é…ç½®é¡¹å¯ä»¥æŸ¥çœ‹org.apache.ibatis.session.Configuration</p>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">typeAliases</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">typeAlias</span> <span class="attr">type</span>=<span class="string">&quot;com.example.DruidDataSourceFactory&quot;</span> <span class="attr">alias</span>=<span class="string">&quot;Druid&quot;</span>/&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">typeAliases</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">environments</span> <span class="attr">default</span>=<span class="string">&quot;development&quot;</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">environment</span> <span class="attr">id</span>=<span class="string">&quot;development&quot;</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">transactionManager</span> <span class="attr">type</span>=<span class="string">&quot;JDBC&quot;</span>/&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">dataSource</span> <span class="attr">type</span>=<span class="string">&quot;Druid&quot;</span>&gt;</span></span><br><span class="line">        .......</span><br></pre></td></tr></table></figure>
<p>dataSourceè¡¨ç¤ºMybatisè·å–è¿æ¥çš„æ–¹å¼ï¼Œå†…ç½®ä¸‰ä¸ªå€¼unPooled,pooledå’ŒJNDIã€‚</p>
<ul>
<li>unpooledï¼šéè¿æ¥æ± ï¼Œç›´æ¥è¿”å›ä¸€ä¸ªè¿æ¥</li>
<li>pooledï¼šè¿æ¥æ± </li>
<li>JNDIï¼šä½¿ç”¨äº†JNDIæŠ€æœ¯ï¼Œæ¯ä¸ªæœåŠ¡å™¨å¯¹åº”çš„è¿æ¥æ± éƒ½ä¸ä¸€æ ·ï¼Œtomcatä½¿ç”¨çš„dpcpè¿æ¥æ± ã€‚è¿™ä¸ªå±æ€§åªèƒ½åœ¨webå·¥ç¨‹ä¸­ä½¿ç”¨</li>
</ul>
<p>æœ¬é¡¹ç›®ä½¿ç”¨Druidè¿æ¥æ± ï¼Œå› æ­¤éœ€è¦è‡ªå®šä¹‰ä¸€ä¸ªDruidçš„å·¥å‚ç±»ï¼Œè¿™ä¸ªä¼šåœ¨åé¢<br><a href="#span-id-jump22-%E5%AE%9E%E7%8E%B0druid%E6%95%B0%E6%8D%AE%E6%BA%90%E5%B7%A5%E5%8E%82%E7%B1%BBspan">å®ç°druidæ•°æ®æºå·¥å‚ç±»</a> éƒ¨åˆ†å®Œæˆã€‚</p>
<p>è¿™é‡Œåªåˆ—å‡ºmybatis-config.xmlçš„é…ç½®ä¿¡æ¯ï¼Œmybatis-config-business.xmlå¯ä»¥å‚ç…§è¿›è¡Œä¿®æ”¹</p>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&lt;?xml version=<span class="string">&quot;1.0&quot;</span> encoding=<span class="string">&quot;UTF-8&quot;</span> ?&gt;</span></span><br><span class="line"><span class="meta">&lt;!DOCTYPE <span class="keyword">configuration</span></span></span><br><span class="line"><span class="meta">        <span class="keyword">PUBLIC</span> <span class="string">&quot;-//mybatis.org//DTD Config 3.0//EN&quot;</span></span></span><br><span class="line"><span class="meta">        <span class="string">&quot;http://mybatis.org/dtd/mybatis-3-config.dtd&quot;</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">configuration</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">settings</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">setting</span> <span class="attr">name</span>=<span class="string">&quot;defaultStatementTimeout&quot;</span> <span class="attr">value</span>=<span class="string">&quot;10&quot;</span>/&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">setting</span> <span class="attr">name</span>=<span class="string">&quot;defaultFetchSize&quot;</span> <span class="attr">value</span>=<span class="string">&quot;300&quot;</span>/&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">setting</span> <span class="attr">name</span>=<span class="string">&quot;jdbcTypeForNull&quot;</span> <span class="attr">value</span>=<span class="string">&quot;NULL&quot;</span>/&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">settings</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">typeAliases</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">typeAlias</span> <span class="attr">type</span>=<span class="string">&quot;com.example.DruidDataSourceFactory&quot;</span> <span class="attr">alias</span>=<span class="string">&quot;Druid&quot;</span>/&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">typeAliases</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">environments</span> <span class="attr">default</span>=<span class="string">&quot;development&quot;</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">environment</span> <span class="attr">id</span>=<span class="string">&quot;development&quot;</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">transactionManager</span> <span class="attr">type</span>=<span class="string">&quot;JDBC&quot;</span>/&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">dataSource</span> <span class="attr">type</span>=<span class="string">&quot;Druid&quot;</span>&gt;</span><span class="comment">&lt;!--æŒ‡å®šç¬¬ä¸‰æ–¹æ•°æ®æºDruid--&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">&quot;id&quot;</span> <span class="attr">value</span>=<span class="string">&quot;business&quot;</span>/&gt;</span><span class="comment">&lt;!--æŒ‡å®šæ•°æ®æºid--&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">&quot;driver&quot;</span> <span class="attr">value</span>=<span class="string">&quot;com.mysql.cj.jdbc.Driver&quot;</span>/&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">&quot;url&quot;</span> <span class="attr">value</span>=<span class="string">&quot;jdbc:mysql://127.0.0.1:3306/mysimpledemodb&quot;</span>/&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">&quot;username&quot;</span> <span class="attr">value</span>=<span class="string">&quot;root&quot;</span>/&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">&quot;password&quot;</span> <span class="attr">value</span>=<span class="string">&quot;123456&quot;</span>/&gt;</span></span><br><span class="line">                <span class="comment">&lt;!--æœ€å¤§è¿æ¥æ•°--&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">&quot;maxActive&quot;</span> <span class="attr">value</span>=<span class="string">&quot;5&quot;</span>/&gt;</span></span><br><span class="line">                <span class="comment">&lt;!--åˆå§‹è¿æ¥æ•°--&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">&quot;initSize&quot;</span> <span class="attr">value</span>=<span class="string">&quot;5&quot;</span>/&gt;</span></span><br><span class="line">                <span class="comment">&lt;!--æœ€å°ç©ºé—²è¿æ¥æ•°--&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">&quot;minIdle&quot;</span> <span class="attr">value</span>=<span class="string">&quot;5&quot;</span>/&gt;</span></span><br><span class="line">                <span class="comment">&lt;!--ä»è¿æ¥æ± è·å–è¿æ¥ç­‰å¾…è¶…æ—¶çš„æ—¶é—´  å•ä½æ¯«ç§’--&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">&quot;maxWait&quot;</span> <span class="attr">value</span>=<span class="string">&quot;5000&quot;</span>/&gt;</span></span><br><span class="line">                <span class="comment">&lt;!--é…ç½®è¿æ¥åœ¨æ± ä¸­æœ€å°ç©ºé—²æ—¶é—´  å•ä½æ¯«ç§’--&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">&quot;minIdleTime&quot;</span> <span class="attr">value</span>=<span class="string">&quot;300000&quot;</span>/&gt;</span></span><br><span class="line">                <span class="comment">&lt;!--æ£€æŸ¥è¿æ¥æœ‰æ•ˆæ€§ï¼Œtrue-ç©ºé—²æ—¶é—´è¿‡é•¿æ—¶æ£€æŸ¥  false-ä¸æ£€æŸ¥--&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">&quot;checkWhileIdle&quot;</span> <span class="attr">value</span>=<span class="string">&quot;true&quot;</span>/&gt;</span></span><br><span class="line">                <span class="comment">&lt;!--æ£€æŸ¥è¿æ¥æœ‰æ•ˆæ€§çš„sql   åªå¯¹MySQLæœ‰æ•ˆ  Oracleä½¿ç”¨select 1 from dual--&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">&quot;validSQL&quot;</span> <span class="attr">value</span>=<span class="string">&quot;select 1&quot;</span>/&gt;</span></span><br><span class="line">                <span class="comment">&lt;!--true-æ£€æŸ¥minIdleå†…çš„ç©ºé—²è¿æ¥æ•°ï¼Œæ¯æ¬¡æ£€æŸ¥å¼ºåˆ¶éªŒè¯è¿æ¥æœ‰æ•ˆæ€§--&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">&quot;keepAlive&quot;</span> <span class="attr">value</span>=<span class="string">&quot;true&quot;</span>/&gt;</span></span><br><span class="line">                <span class="comment">&lt;!--è§£å†³ç½‘ç»œå¼‚å¸¸æ—¶ä¸šåŠ¡çº¿ç¨‹é˜»å¡åœ¨è¯·æ±‚è¿æ¥çš„è¿‡ç¨‹--&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">&quot;failFast&quot;</span> <span class="attr">value</span>=<span class="string">&quot;true&quot;</span>/&gt;</span></span><br><span class="line">            <span class="tag">&lt;/<span class="name">dataSource</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">environment</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">environments</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">mappers</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">mapper</span> <span class="attr">resource</span>=<span class="string">&quot;StudentMapper.xml&quot;</span>/&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">mappers</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">configuration</span>&gt;</span></span><br><span class="line"></span><br></pre></td></tr></table></figure>



<h2 id="2-2-å®ç°Druidæ•°æ®æºå·¥å‚ç±»"><a href="#2-2-å®ç°Druidæ•°æ®æºå·¥å‚ç±»" class="headerlink" title="2.2 å®ç°Druidæ•°æ®æºå·¥å‚ç±»"></a><span id ="jump">2.2 å®ç°Druidæ•°æ®æºå·¥å‚ç±»</span></h2><p>ç”±äºMybatisé…ç½®ä¸­æŒ‡å®šäº†ç¬¬ä¸‰æ–¹æ•°æ®æºDruidï¼Œå› æ­¤éœ€è¦å®ç°ä¸€ä¸ªDruidæ•°æ®æºçš„å·¥å‚ç±»ã€‚<br>å…³äºè‡ªå®šä¹‰DruidDataSourceFactoryçš„æ–¹å¼æœ‰å¾ˆå¤šç§ï¼š</p>
<ul>
<li><strong><font color = darkred>extends DruidDataSourceFactory implements DataSourceFactory</font></strong> ï¼šè¿™ç§æ–¹å¼ç»§æ‰¿äº†Druidä¸­å·²ç»å®ç°çš„DruidDataSourceFactoryå¹¶ä¸”å®ç°æ¥å£DataSourceFactoryï¼Œè¿™ç§æ–¹å¼å¯ä»¥å¯¹Druidä¸­çš„DruidDataSourceFactoryè¿›è¡Œä¸€äº›ä¸ªæ€§åŒ–å®šåˆ¶æˆ–è€…æ‰©å±•ï¼Œä¼šé¢å¤–å¢åŠ ä»£ç é‡ï¼Œå¯ç›´æ¥é…ç½®web.xmlæ¥ä½¿ç”¨Druidç›‘æ§ï¼Œåé¢ä¸¤ç§æ–¹å¼å¯èƒ½éœ€è¦è‡ªå®šä¹‰ç›‘æ§é€»è¾‘</li>
<li><strong><font color = darkred>extends UnpooledDataSourceFactory</font></strong> ï¼šè¿™ç§æ–¹å¼ç®€å•æ˜äº†,å› ä¸ºUnpooledDataSourceFactoryå·²ç»å®ç°äº†è·å–UnpooledDataSource çš„å±æ€§ï¼Œå› æ­¤åªéœ€è¦†ç›–æ‰éœ€è¦çš„å±æ€§å³å¯</li>
<li><strong><font color = darkred>implements DataSourceFactory</font></strong> ï¼šè¿™ç§æ–¹å¼éœ€è¦å®ç°setPropertieså’ŒgetDataSourceæ–¹æ³•ï¼Œå¯ä»¥å¾ˆçµæ´»åœ°é…ç½®DruidDataSource</li>
</ul>
<p>è¿™é‡Œè¦æ³¨æ„çš„æ˜¯ï¼Œç¬¬ä¸€ç§æ–¹å¼åœ¨mybatis-config.xmlæ–‡ä»¶ä¸­ï¼Œpropertyçš„nameå¦‚æœæ²¡æœ‰ä¸Druidè§„å®šçš„å±æ€§åå­—ä¿æŒä¸€è‡´ï¼Œåˆ™éœ€è¦å¯¹è¯¥å±æ€§è¿›è¡Œè¦†ç›–ï¼Œå¦åˆ™ä¼šæŠ¥é”™ï¼›ç¬¬äºŒç§æ–¹å¼ä¹ŸåŒæ ·ï¼Œå¦‚æœæ²¡æœ‰ä¸Mybatisè§„å®šçš„å±æ€§åä¸€è‡´ä¸”æ²¡æœ‰å¯¹å±æ€§è¿›è¡Œè¦†ç›–ï¼Œä¹Ÿä¼šæŠ¥é”™ã€‚</p>
<p>ç¬¬ä¸‰ç§æ–¹å¼ç”±äºæ˜¯è‡ªå®šä¹‰getDataSourceçš„å®ç°é€»è¾‘ï¼Œå› æ­¤propertyçš„nameå¯ä»¥è‡ªå®šä¹‰ã€‚</p>
<p>è¿™é‡Œé‡‡ç”¨ç¬¬ä¸‰ç§æ–¹å¼ï¼Œå®ç°DataSourceFactoryæ¥è‡ªå®šä¹‰DruidDataSourceFactoryã€‚</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * è‡ªå®šä¹‰Druidæ•°æ®æºå·¥å‚ç±»</span></span><br><span class="line"><span class="comment"> * new SqlSessionFactoryBuilder().buildçš„æ—¶å€™ä¼šè¿›å…¥è¿™é‡Œ</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">DruidDataSourceFactory</span> <span class="keyword">implements</span> <span class="title class_">DataSourceFactory</span> &#123;</span><br><span class="line"></span><br><span class="line">    <span class="comment">//é…ç½®ä¿¡æ¯</span></span><br><span class="line">    <span class="keyword">private</span> Properties properties;</span><br><span class="line">UnpooledDataSourceFactory</span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * å·²é…ç½®çš„æ•°æ®æºé›†åˆ</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">static</span> ConcurrentHashMap&lt;String, DruidDataSource&gt; dataSourceMap = <span class="keyword">new</span> <span class="title class_">ConcurrentHashMap</span>&lt;&gt;();</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">setProperties</span><span class="params">(Properties properties)</span> &#123;</span><br><span class="line">        <span class="built_in">this</span>.properties = properties;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">public</span> DataSource <span class="title function_">getDataSource</span><span class="params">()</span> &#123;</span><br><span class="line">        <span class="type">DruidDataSource</span> <span class="variable">druidDataSource</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">DruidDataSource</span>();</span><br><span class="line"></span><br><span class="line">        <span class="comment">//è·å–xmlé…ç½®å†…å®¹</span></span><br><span class="line">        druidDataSource.setDriverClassName(<span class="built_in">this</span>.properties.getProperty(<span class="string">&quot;driver&quot;</span>));</span><br><span class="line">        <span class="type">String</span> <span class="variable">key</span> <span class="operator">=</span> <span class="built_in">this</span>.properties.getProperty(<span class="string">&quot;id&quot;</span>);</span><br><span class="line">        <span class="keyword">if</span> (dataSourceMap.containsKey(key))&#123;</span><br><span class="line">            dataSourceMap.get(key).close();</span><br><span class="line">        &#125;</span><br><span class="line">        druidDataSource.setUrl(<span class="built_in">this</span>.properties.getProperty(<span class="string">&quot;url&quot;</span>));</span><br><span class="line">        druidDataSource.setUsername(<span class="built_in">this</span>.properties.getProperty(<span class="string">&quot;username&quot;</span>));</span><br><span class="line">        druidDataSource.setPassword(<span class="built_in">this</span>.properties.getProperty(<span class="string">&quot;password&quot;</span>));</span><br><span class="line"></span><br><span class="line">        <span class="type">int</span> <span class="variable">maxActive</span> <span class="operator">=</span> Integer.parseInt(<span class="built_in">this</span>.properties.getProperty(<span class="string">&quot;maxActive&quot;</span>));</span><br><span class="line">        druidDataSource.setMaxActive(maxActive);</span><br><span class="line"></span><br><span class="line">        <span class="type">int</span> <span class="variable">initSize</span> <span class="operator">=</span> Integer.parseInt(<span class="built_in">this</span>.properties.getProperty(<span class="string">&quot;initSize&quot;</span>));</span><br><span class="line">        druidDataSource.setInitialSize(initSize);</span><br><span class="line"></span><br><span class="line">        <span class="type">int</span> <span class="variable">minIdle</span> <span class="operator">=</span> Integer.parseInt(<span class="built_in">this</span>.properties.getProperty(<span class="string">&quot;minIdle&quot;</span>));</span><br><span class="line">        druidDataSource.setMinIdle(minIdle);</span><br><span class="line"></span><br><span class="line">        <span class="type">long</span> <span class="variable">maxWait</span> <span class="operator">=</span> Long.parseLong(<span class="built_in">this</span>.properties.getProperty(<span class="string">&quot;maxWait&quot;</span>));</span><br><span class="line">        druidDataSource.setMaxWait(maxWait);</span><br><span class="line"></span><br><span class="line">        <span class="type">boolean</span> <span class="variable">failFast</span> <span class="operator">=</span> Boolean.parseBoolean(<span class="built_in">this</span>.properties.getProperty(<span class="string">&quot;failFast&quot;</span>));</span><br><span class="line">        druidDataSource.setFailFast(failFast);</span><br><span class="line"></span><br><span class="line">        <span class="keyword">try</span> &#123;</span><br><span class="line">            <span class="comment">//æ·»åŠ statè¿‡æ»¤å™¨ï¼Œç”¨äºç»Ÿè®¡ç›‘æ§ä¿¡æ¯ï¼Œä¾‹å¦‚SQLæ‰§è¡Œæ—¶é—´ã€è®¿é—®æ¬¡æ•°ã€è¿æ¥æ± çš„æ´»è·ƒè¿æ¥æ•°ã€è¯·æ±‚è¿æ¥æ•°ã€æœ€å¤§è¿æ¥æ•°ç­‰</span></span><br><span class="line">            druidDataSource.addFilters(<span class="string">&quot;stat&quot;</span>);</span><br><span class="line">            <span class="comment">//Spring Boot é»˜è®¤çš„æ—¥å¿—ç³»ç»Ÿæ˜¯ logbackï¼Œå¹¶æ²¡æœ‰ä¾èµ– log4jï¼Œè¿™é‡Œé…ç½®çš„ log4j ä¼šæŠ¥é”™ã€‚è¦æƒ³ä½¿ç”¨ log4j filter è¦æŠŠæ—¥å¿—ç³»ç»Ÿåˆ‡æ¢ä¸º log4jã€‚</span></span><br><span class="line">            <span class="comment">//druidDataSource.addFilters(&quot;log4j&quot;);</span></span><br><span class="line">            <span class="comment">//æ·»åŠ configè¿‡æ»¤å™¨ï¼Œç”¨äºé…ç½®è¿æ¥æ± çš„ä¸€äº›å‚æ•°ï¼Œä¾‹å¦‚åˆå§‹è¿æ¥æ•°ã€æœ€å¤§è¿æ¥æ•°ã€æœ€å°è¿æ¥æ•°ç­‰</span></span><br><span class="line">            druidDataSource.addFilters(<span class="string">&quot;config&quot;</span>);</span><br><span class="line">            druidDataSource.init();</span><br><span class="line">            dataSourceMap.put(key,druidDataSource);</span><br><span class="line">        &#125; <span class="keyword">catch</span> (SQLException ex)&#123;</span><br><span class="line">            ex.printStackTrace();</span><br><span class="line">            druidDataSource.close();</span><br><span class="line">            <span class="keyword">return</span> <span class="literal">null</span>;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">return</span> druidDataSource;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h2 id="2-3-åˆå§‹åŒ–Mybatis"><a href="#2-3-åˆå§‹åŒ–Mybatis" class="headerlink" title="2.3 åˆå§‹åŒ–Mybatis"></a>2.3 åˆå§‹åŒ–Mybatis</h2><p>é¡¹ç›®ä¸­æ¯ä¸€ä¸ªæ•°æ®æºé…ç½®ä¿¡æ¯éƒ½åˆ†åˆ«å­˜åœ¨ä¸åŒçš„mybatis-config.xmlæ–‡ä»¶ä¸­ï¼Œéœ€è¦åœ¨åˆ›å»ºSqlSessionFactoryå®ä¾‹æ—¶å°†æ¯ä¸€ä¸ªé…ç½®æ–‡ä»¶éƒ½ä¼ å…¥ï¼Œéšç€ä¸šåŠ¡çš„å‘å±•å¯èƒ½ä¼šæ–°å¢æ•°æ®æºï¼Œå› æ­¤ä¸èƒ½åœ¨ä»£ç ä¸­å…¨éƒ¨ç½—åˆ—å‡ºæ¥å†åˆ›å»ºSqlSessionFactoryå¯¹è±¡ã€‚</p>
<p>å¯ä»¥é‡‡ç”¨è¿™æ ·ä¸€ç§è§£å†³æ–¹æ¡ˆï¼š</p>
<ul>
<li>1.åˆ›å»ºä¸€ä¸ªå¸¸é‡ç±»DataBaseConfigKeyç”¨äºå­˜å‚¨datasourceId</li>
<li>2.é…ç½®datasourceIdä¸mybatis-config.xmlæ–‡ä»¶çš„æ˜ å°„å…³ç³»</li>
<li>3.é€šè¿‡åå°„éå†å¸¸é‡ç±»DataBaseConfigKeyçš„å±æ€§æ¥è·å–é…ç½®æ–‡ä»¶å¹¶è¯»å–</li>
</ul>
<p>åœ¨commonæ¨¡å—ä¸‹æ–°å»ºå¸¸é‡ç±»DataBaseConfigKey</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">DataBaseConfigKey</span> &#123;</span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * ä¸šåŠ¡ç±»æ•°æ®åº“1</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">final</span> <span class="type">String</span> <span class="variable">BUSINESSDATASOURCE</span> <span class="operator">=</span> <span class="string">&quot;datasource.business&quot;</span>;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * ä¸šåŠ¡ç±»æ•°æ®åº“2</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">final</span> <span class="type">String</span> <span class="variable">BUSINESSDATASOURCE2</span> <span class="operator">=</span> <span class="string">&quot;datasource.business2&quot;</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>åœ¨config&#x2F;application.propertiesä¸­æ·»åŠ mybatisé…ç½®æ–‡ä»¶ï¼Œç”¨æ¥æŒ‡å®šæ¯ä¸ªmybatisé…ç½®æ–‡ä»¶çš„datasourceId</p>
<figure class="highlight properties"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># =============DataSource Config===========</span></span><br><span class="line"><span class="attr">datasource.business</span> = <span class="string">mybatis-config.xml</span></span><br><span class="line"><span class="attr">datasource.business2</span> = <span class="string">mybatis-config-business2.xml</span></span><br></pre></td></tr></table></figure>

<p>åœ¨daoæ¨¡å—ä¸‹åˆ›å»ºä¸€ä¸ªMybatisHelperç±»ï¼Œç”¨äºç®¡ç†SqlSessionï¼Œåˆå§‹åŒ–çš„é€»è¾‘å¦‚ä¸‹ï¼š</p>
<ul>
<li>é€šè¿‡åå°„è·å–DataBaseConfigKeyçš„æˆå‘˜å˜é‡çš„å€¼ï¼Œå³dataSourceId</li>
<li>application.propertiesæ–‡ä»¶ä¸­é€šè¿‡dataSourceIdæ‰¾åˆ°å¯¹åº”çš„mybatis-config.xmlé…ç½®æ–‡ä»¶</li>
<li>è¯»å–xmlæ–‡ä»¶å†…å®¹ï¼Œå»ºç«‹SqlSessionFactoryå¹¶æ”¾å…¥Mybatisé›†åˆä¸­</li>
</ul>
<p>é¦–å…ˆåˆ›å»ºä¸€ä¸ªå·¥å…·ç±»ï¼Œcommon&#x2F;CommonUtilï¼Œè¯»å–applicaition.propertieså†…å®¹çš„æ–¹æ³•å°±åœ¨è¿™ä¸ªå·¥å…·ç±»ä¸­å®ç°</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">CommonUtil</span> &#123;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">static</span> <span class="type">Properties</span> <span class="variable">properties</span> <span class="operator">=</span> <span class="literal">null</span>;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * åˆå§‹åŒ–é…ç½®ä¿¡æ¯</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">initConfiguration</span><span class="params">()</span>&#123;</span><br><span class="line"></span><br><span class="line">        <span class="keyword">try</span> &#123;</span><br><span class="line">            <span class="comment">//è¯»å–é…ç½®æ–‡ä»¶</span></span><br><span class="line">            <span class="type">Resource</span> <span class="variable">resource</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">FileSystemResource</span>(<span class="string">&quot;config/application.properties&quot;</span>);</span><br><span class="line">            <span class="keyword">if</span> (!resource.exists())&#123;</span><br><span class="line">                resource = <span class="keyword">new</span> <span class="title class_">ClassPathResource</span>(<span class="string">&quot;application.properties&quot;</span>);</span><br><span class="line">            &#125;</span><br><span class="line">            <span class="comment">//è½½å…¥é…ç½®æ–‡ä»¶è‡³properties</span></span><br><span class="line">            properties = PropertiesLoaderUtils.loadProperties(resource);</span><br><span class="line">        &#125; <span class="keyword">catch</span> (IOException e) &#123;</span><br><span class="line">            e.printStackTrace();</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * æ ¹æ®é…ç½®æ–‡ä»¶ä¸­çš„keyè·å–å¯¹åº”çš„value</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@param</span> key</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@return</span></span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> String <span class="title function_">getProperties</span><span class="params">(String key)</span>&#123;</span><br><span class="line">        <span class="keyword">if</span> (properties == <span class="literal">null</span>)&#123;</span><br><span class="line">            <span class="comment">//è¿˜æœªè½½å…¥é…ç½®æ–‡ä»¶</span></span><br><span class="line">            initConfiguration();</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">return</span> properties.getProperty(key);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>æ¥ä¸‹æ¥æŒ‰ç…§ä¸Šé¢çš„åˆå§‹åŒ–é€»è¾‘æ¥å®ç°å¯¹Mybtaisçš„åˆå§‹åŒ–</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">MybatisHelper</span> &#123;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * å·²ç»å»ºå¥½çš„sqlsessionfactoryé›†åˆ</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> Map&lt;String, SqlSessionFactory&gt; sqlSessionFactoryMap = <span class="keyword">new</span> <span class="title class_">ConcurrentHashMap</span>&lt;&gt;();</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * æ ¹æ®application.propertiesé…ç½®æ–‡ä»¶ä¸­çš„é…ç½®keyè·å–å¯¹åº”çš„sqlsessionfactory</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@param</span> dataSourceName é…ç½®æ–‡ä»¶ä¸­çš„é…ç½®key</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@return</span></span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> SqlSessionFactory <span class="title function_">getSqlSessionFactory</span><span class="params">(String dataSourceName)</span>&#123;</span><br><span class="line">        <span class="comment">//åœ¨é…ç½®æ–‡ä»¶ä¸­æ ¹æ®datasourcenameè·å–å¯¹åº”çš„mybatisé…ç½®æ–‡ä»¶å</span></span><br><span class="line">        <span class="type">String</span> <span class="variable">configFileName</span> <span class="operator">=</span> ConfigUtil.getProperties(dataSourceName);</span><br><span class="line">        <span class="comment">//æ ¹æ®mybatisé…ç½®æ–‡ä»¶ååˆ›å»ºå¯¹åº”çš„sqlsessionfactory</span></span><br><span class="line">        <span class="keyword">return</span> getSqlSessionFactoryByFileName(configFileName);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * æ ¹æ®æŒ‡å®šæ–‡ä»¶åè·å–å¯¹åº”çš„sqlsessionfactory</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@param</span> fileName  mybatisé…ç½®æ–‡ä»¶å</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@return</span></span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> SqlSessionFactory <span class="title function_">getSqlSessionFactoryByFileName</span><span class="params">(String fileName)</span>&#123;</span><br><span class="line">        <span class="type">SqlSessionFactory</span> <span class="variable">sqlSessionFactory</span> <span class="operator">=</span> <span class="literal">null</span>;</span><br><span class="line">        Resource resource;</span><br><span class="line">        <span class="keyword">if</span> (StringUtils.hasText(fileName))&#123;</span><br><span class="line">            resource = <span class="keyword">new</span> <span class="title class_">FileSystemResource</span>(<span class="string">&quot;config/&quot;</span>+fileName);</span><br><span class="line">            <span class="keyword">if</span> (!resource.exists())&#123;</span><br><span class="line">                resource = <span class="keyword">new</span> <span class="title class_">ClassPathResource</span>(fileName);</span><br><span class="line">            &#125;</span><br><span class="line">            <span class="keyword">try</span> &#123;</span><br><span class="line">                <span class="comment">//é€šè¿‡sqlsessionfactorybuilderå»ºç«‹SqlSessionFactory</span></span><br><span class="line">                <span class="comment">//buildçš„æ—¶å€™ä¼šæ‰§è¡Œè‡ªå®šä¹‰çš„DruidDataSourceFactoryé‡Œé¢å¯¹mybatis-configæ–‡ä»¶çš„çš„è¯»å–</span></span><br><span class="line">                sqlSessionFactory = <span class="keyword">new</span> <span class="title class_">SqlSessionFactoryBuilder</span>().build(resource.getInputStream());</span><br><span class="line">            &#125; <span class="keyword">catch</span> (IOException e) &#123;</span><br><span class="line">                e.printStackTrace();</span><br><span class="line">            &#125;</span><br><span class="line">        &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">            System.out.println(<span class="string">&quot;æ–‡ä»¶&quot;</span>+fileName+<span class="string">&quot;æœªé…ç½®&quot;</span>);</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">return</span> sqlSessionFactory;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * åˆå§‹åŒ–mybatisé›†åˆ</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">InitMybatisMap</span><span class="params">()</span> <span class="keyword">throws</span> NoSuchMethodException, InvocationTargetException, InstantiationException, IllegalAccessException &#123;</span><br><span class="line">        <span class="comment">//é€šè¿‡åå°„è·å–æ‰€æœ‰mybatisæ•°æ®åº“é…ç½®</span></span><br><span class="line">        Class&lt;DataBaseConfigKey&gt; clazz = DataBaseConfigKey.class;</span><br><span class="line">        <span class="type">Constructor</span> <span class="variable">constructor</span> <span class="operator">=</span> clazz.getConstructor();</span><br><span class="line">        <span class="type">Object</span> <span class="variable">obj</span> <span class="operator">=</span> constructor.newInstance();<span class="comment">//è·å–DataBaseConfigKeyå¯¹è±¡çš„å®ä¾‹</span></span><br><span class="line"></span><br><span class="line">        Field[] fields = clazz.getFields();<span class="comment">//è·å–publicå˜é‡</span></span><br><span class="line">        <span class="keyword">for</span> (Field f :fields)&#123;</span><br><span class="line">            <span class="type">long</span> <span class="variable">begin</span> <span class="operator">=</span> System.currentTimeMillis();</span><br><span class="line">            <span class="type">String</span> <span class="variable">objValue</span> <span class="operator">=</span> (String) f.get(obj);<span class="comment">//è·å–å®ä¾‹objçš„æˆå‘˜å˜é‡çš„å€¼</span></span><br><span class="line">            <span class="keyword">if</span> (objValue != <span class="literal">null</span>)&#123;</span><br><span class="line">                <span class="keyword">if</span> (!sqlSessionFactoryMap.containsKey(objValue))&#123;</span><br><span class="line">                    <span class="comment">//objValueæ•°æ®æºå¯¹åº”çš„sqlSessionFactoryè¿˜æœªå»ºç«‹</span></span><br><span class="line">                    <span class="type">SqlSessionFactory</span> <span class="variable">sqlSessionFactory</span> <span class="operator">=</span> getSqlSessionFactory(objValue);</span><br><span class="line">                    <span class="keyword">if</span> (sqlSessionFactory != <span class="literal">null</span>)&#123;</span><br><span class="line">                        sqlSessionFactoryMap.put(objValue,sqlSessionFactory);</span><br><span class="line">                        LogUtil.LogError(String.format(<span class="string">&quot;Mybatis %s åˆå§‹åŒ–æˆåŠŸï¼Œè€—æ—¶: %s!&quot;</span>,objValue,System.currentTimeMillis()-begin));</span><br><span class="line">                    &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">                        LogUtil.LogError(String.format(<span class="string">&quot;Mybatis %s åˆå§‹åŒ–å¤±è´¥ï¼Œè€—æ—¶: %s!&quot;</span>,objValue,System.currentTimeMillis()-begin));</span><br><span class="line">                    &#125;</span><br><span class="line">                &#125;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>éœ€è¦åœ¨å¯åŠ¨ç±»ä¸­æ‰‹åŠ¨æ·»åŠ åˆå§‹åŒ–Mybatisé€»è¾‘</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@SpringBootApplication</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">SchedualProjectApplication</span> &#123;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String[] args)</span> &#123;</span><br><span class="line"></span><br><span class="line">        <span class="keyword">try</span> &#123;</span><br><span class="line">            SpringApplication.run(SchedualProjectApplication.class, args);</span><br><span class="line"></span><br><span class="line">            <span class="comment">//å¯ä»¥æ ¹æ®éœ€è¦é…ç½®ä¸åŒçš„æ—¥å¿—</span></span><br><span class="line">            <span class="keyword">try</span> &#123;</span><br><span class="line">                LogUtil.Init();</span><br><span class="line">            &#125; <span class="keyword">catch</span> (Exception e)&#123;</span><br><span class="line">                LogUtil.LogError(e.getMessage(),e);</span><br><span class="line">            &#125;</span><br><span class="line"></span><br><span class="line">            <span class="comment">//åˆå§‹åŒ–mybatisé›†åˆ</span></span><br><span class="line">            MybatisHelper.InitMybatisMap();</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">        &#125; <span class="keyword">catch</span> (Exception e) &#123;</span><br><span class="line">            e.printStackTrace();</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h2 id="2-4-å®ç°å¤šæ•°æ®æºæ‰‹åŠ¨åˆ‡æ¢"><a href="#2-4-å®ç°å¤šæ•°æ®æºæ‰‹åŠ¨åˆ‡æ¢" class="headerlink" title="2.4 å®ç°å¤šæ•°æ®æºæ‰‹åŠ¨åˆ‡æ¢"></a>2.4 å®ç°å¤šæ•°æ®æºæ‰‹åŠ¨åˆ‡æ¢</h2><p>ä¸Šé¢å·²ç»å®ç°äº†  åŠ è½½Myatisé…ç½®-&gt;æ„å»ºSqlSessionFactory   çš„è¿‡ç¨‹ï¼Œç°åœ¨å°±éœ€è¦é€šè¿‡SqlSessionFactoryä¸­è·å–SqlSessionã€‚</p>
<p>SqlSession æä¾›äº†åœ¨æ•°æ®åº“æ‰§è¡Œ SQL å‘½ä»¤æ‰€éœ€çš„æ‰€æœ‰æ–¹æ³•ã€‚å¯ä»¥é€šè¿‡ SqlSession å®ä¾‹æ¥ç›´æ¥æ‰§è¡Œå·²æ˜ å°„çš„ SQL è¯­å¥ã€‚</p>
<p>é¦–å…ˆå®ç°è·å–SqlSessionçš„æ–¹æ³•ï¼Œè¿™ä¸ªæ–¹æ³•æ·»åŠ åˆ°MybatisHelperä¸­</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment">     * æ ¹æ®datasoureidè·å–sqlsession</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@param</span> datasourceId</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@return</span></span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> SqlSession <span class="title function_">getSqlSession</span><span class="params">(String datasourceId)</span>&#123;</span><br><span class="line">        <span class="keyword">if</span> (sqlSessionFactoryMap.containsKey(datasourceId))&#123;</span><br><span class="line">            <span class="keyword">if</span> (sqlSessionFactoryMap.get(datasourceId) == <span class="literal">null</span>)&#123;</span><br><span class="line">                <span class="comment">//mybatisä¸­å¯¹åº”çš„sqlsessionfactoryä¸ºç©ºï¼Œæ‰‹åŠ¨è·å–å¹¶æ”¾å…¥é›†åˆä¸­</span></span><br><span class="line">                <span class="type">SqlSessionFactory</span> <span class="variable">sessionFactory</span> <span class="operator">=</span> getSqlSessionFactory(datasourceId);</span><br><span class="line">                <span class="keyword">if</span> (sessionFactory != <span class="literal">null</span>)&#123;</span><br><span class="line">                    sqlSessionFactoryMap.put(datasourceId,sessionFactory);</span><br><span class="line">                    <span class="keyword">return</span> sessionFactory.openSession();</span><br><span class="line">                &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">                    <span class="keyword">return</span> <span class="literal">null</span>;</span><br><span class="line">                &#125;</span><br><span class="line">            &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">                <span class="comment">//è·å–åˆ°äº†sqlsessionFactoryå®ä¾‹ï¼Œè·å–å¯¹åº”çš„SqlSession</span></span><br><span class="line">                <span class="keyword">return</span> sqlSessionFactoryMap.get(datasourceId).openSession();</span><br><span class="line">            &#125;</span><br><span class="line">        &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">            <span class="comment">//æ²¡æœ‰è·å–åˆ°datasoruceå¯¹åº”çš„sqlsessionFactoryï¼Œæ‰‹åŠ¨åŠ è½½</span></span><br><span class="line">            <span class="type">SqlSessionFactory</span> <span class="variable">sessionFactory</span> <span class="operator">=</span> getSqlSessionFactory(datasourceId);</span><br><span class="line">            <span class="keyword">if</span> (sessionFactory != <span class="literal">null</span>)&#123;</span><br><span class="line">                sqlSessionFactoryMap.put(datasourceId,sessionFactory);</span><br><span class="line">                <span class="keyword">return</span> sessionFactory.openSession();</span><br><span class="line">            &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">                <span class="keyword">return</span> <span class="literal">null</span>;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br></pre></td></tr></table></figure>
<p>æ•°æ®è¡¨çš„åˆ›å»ºä»¥åŠåˆå§‹æ•°æ®çš„æ’å…¥ä¸å†èµ˜è¿°</p>
<p>æ¥ä¸‹æ¥åˆ›å»ºæ˜ å°„å™¨mapperï¼Œmapper.xmlåŒ…å«äº†SQLä»£ç å’Œæ˜ å°„å®šä¹‰ä¿¡æ¯ï¼Œmapper.xmlæ–‡ä»¶æ”¾åœ¨configä¸‹ï¼Œmapperæ¥å£ç±»æ”¾åœ¨Daoä¸­ï¼Œæ˜ å°„å™¨éœ€è¦æ·»åŠ åˆ°å¯¹åº”æ•°æ®æºé…ç½®æ–‡ä»¶çš„<mappers></mappers>å…ƒç´ ä¸‹</p>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&lt;?xml version=<span class="string">&quot;1.0&quot;</span> encoding=<span class="string">&quot;UTF-8&quot;</span> ?&gt;</span></span><br><span class="line"><span class="meta">&lt;!DOCTYPE <span class="keyword">mapper</span></span></span><br><span class="line"><span class="meta">        <span class="keyword">PUBLIC</span> <span class="string">&quot;-//mybatis.org//DTD mapper 3.0//EN&quot;</span></span></span><br><span class="line"><span class="meta">        <span class="string">&quot;http://mybatis.org/dtd/mybatis-3-mapper.dtd&quot;</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">mapper</span> <span class="attr">namespace</span>=<span class="string">&quot;com.example.scheduleproject.mappers.StudentMapper&quot;</span>&gt;</span></span><br><span class="line"></span><br><span class="line">    <span class="tag">&lt;<span class="name">select</span> <span class="attr">id</span>=<span class="string">&quot;getStudentInfoByStudentNum&quot;</span> <span class="attr">resultType</span>=<span class="string">&quot;com.example.scheduleproject.model.Student&quot;</span>&gt;</span></span><br><span class="line">        select stuNum,name,classNum,gender,age from student where stuNum = #&#123;studentNum&#125;</span><br><span class="line">    <span class="tag">&lt;/<span class="name">select</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;/<span class="name">mapper</span>&gt;</span></span><br></pre></td></tr></table></figure>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Mapper</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">interface</span> <span class="title class_">StudentMapper</span> &#123;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * æ ¹æ®å­¦å·æŸ¥è¯¢å­¦ç”Ÿä¿¡æ¯</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@param</span> studentNum</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@return</span></span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="keyword">public</span> Student <span class="title function_">getStudentInfoByStudentNum</span><span class="params">(<span class="meta">@Param(&quot;studentNum&quot;)</span> String studentNum)</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>ç°åœ¨å¯ä»¥åœ¨å¯åŠ¨ç±»ä¸­æµ‹è¯•æ˜¯å¦å¯ä»¥æˆåŠŸæ‰§è¡Œäº†</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String[] args)</span> &#123;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">try</span> &#123;</span><br><span class="line">        SpringApplication.run(SchedualProjectApplication.class, args);</span><br><span class="line">        <span class="keyword">try</span> &#123;</span><br><span class="line">            Logger.Init();</span><br><span class="line">        &#125; <span class="keyword">catch</span> (Exception e)&#123;</span><br><span class="line">            Logger.LogError(e.getMessage(),e);</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">        <span class="comment">//åˆå§‹åŒ–mybatisé›†åˆ</span></span><br><span class="line">        MybatisHelper.InitMybatisMap();</span><br><span class="line"></span><br><span class="line">        <span class="type">SqlSession</span> <span class="variable">sqlSession</span> <span class="operator">=</span> MybatisHelper.getSqlSession(DataBaseConfigKey.BUSINESSDATASOURCE);</span><br><span class="line">        <span class="type">StudentMapper</span> <span class="variable">mapper</span> <span class="operator">=</span> sqlSession.getMapper(StudentMapper.class);</span><br><span class="line">        <span class="type">Student</span> <span class="variable">student</span> <span class="operator">=</span> mapper.getStudentInfoByStudentNum(<span class="string">&quot;20220101&quot;</span>);</span><br><span class="line">        System.out.println(student.toString());</span><br><span class="line">        sqlSession.close();</span><br><span class="line"></span><br><span class="line">        <span class="type">SqlSession</span> <span class="variable">session</span> <span class="operator">=</span> MybatisHelper.getSqlSession(DataBaseConfigKey.BUSINESSDATASOURCE2);</span><br><span class="line">        <span class="type">CityMapper</span> <span class="variable">cityMapper</span> <span class="operator">=</span> session.getMapper(CityMapper.class);</span><br><span class="line">        <span class="type">City</span> <span class="variable">city</span> <span class="operator">=</span> cityMapper.getCityProvince(<span class="string">&quot;æ­¦æ±‰&quot;</span>);</span><br><span class="line">        System.out.println(city.toString());</span><br><span class="line">        session.close();</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">    &#125; <span class="keyword">catch</span> (Exception e) &#123;</span><br><span class="line">        e.printStackTrace();</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>æ‰§è¡Œç»“æœå¦‚ä¸‹ï¼Œå®ç°äº†æ‰‹åŠ¨åˆ‡æ¢æ•°æ®æºçš„åŠŸèƒ½</p>
<p><img src="https://raw.githubusercontent.com/yasmin1024/hexoBlogImgRepository/main/postImg/01/%E5%BE%AE%E4%BF%A1%E6%88%AA%E5%9B%BE_20230428184758.png"></p>
<h2 id="2-5-å®ç°å¤šæ•°æ®æºåŠ¨æ€åˆ‡æ¢"><a href="#2-5-å®ç°å¤šæ•°æ®æºåŠ¨æ€åˆ‡æ¢" class="headerlink" title="2.5 å®ç°å¤šæ•°æ®æºåŠ¨æ€åˆ‡æ¢"></a>2.5 å®ç°å¤šæ•°æ®æºåŠ¨æ€åˆ‡æ¢</h2><h1 id="3-Quartzå®šæ—¶ä»»åŠ¡"><a href="#3-Quartzå®šæ—¶ä»»åŠ¡" class="headerlink" title="3.Quartzå®šæ—¶ä»»åŠ¡"></a>3.Quartzå®šæ—¶ä»»åŠ¡</h1></article><div class="post-copyright"><div class="post-copyright__author"><span class="post-copyright-meta">æ–‡ç« ä½œè€…: </span><span class="post-copyright-info"><a href="http://example.com">yasmin1024</a></span></div><div class="post-copyright__type"><span class="post-copyright-meta">æ–‡ç« é“¾æ¥: </span><span class="post-copyright-info"><a href="http://example.com/post/b0798327.html">http://example.com/post/b0798327.html</a></span></div><div class="post-copyright__notice"><span class="post-copyright-meta">ç‰ˆæƒå£°æ˜: </span><span class="post-copyright-info">æœ¬åšå®¢æ‰€æœ‰æ–‡ç« é™¤ç‰¹åˆ«å£°æ˜å¤–ï¼Œå‡é‡‡ç”¨ <a href="https://creativecommons.org/licenses/by-nc-sa/4.0/" target="_blank">CC BY-NC-SA 4.0</a> è®¸å¯åè®®ã€‚è½¬è½½è¯·æ³¨æ˜æ¥è‡ª <a href="http://example.com" target="_blank">å†°ç³–è‚¥è‚ é¼“æŒğŸ‘</a>ï¼</span></div></div><div class="tag_share"><div class="post-meta__tag-list"><a class="post-meta__tags" href="/tags/SpringBoot/">SpringBoot</a><a class="post-meta__tags" href="/tags/Quartz/">Quartz</a><a class="post-meta__tags" href="/tags/Mybatis/">Mybatis</a><a class="post-meta__tags" href="/tags/Druid/">Druid</a><a class="post-meta__tags" href="/tags/%E5%A4%9A%E6%95%B0%E6%8D%AE%E6%BA%90%E9%85%8D%E7%BD%AE/">å¤šæ•°æ®æºé…ç½®</a></div><div class="post_share"><div class="social-share" data-image="/image/avatar.jpg" data-sites="facebook,twitter,wechat,weibo,qq"></div><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/butterfly-extsrc/sharejs/dist/css/share.min.css" media="print" onload="this.media='all'"><script src="https://cdn.jsdelivr.net/npm/butterfly-extsrc/sharejs/dist/js/social-share.min.js" defer></script></div></div><nav class="pagination-post" id="pagination"><div class="prev-post pull-full"><a href="/post/7d755a85.html" title="é—¨é¢æ¨¡å¼&amp;é€‚é…å™¨æ¨¡å¼&amp;æ³¨å†Œå™¨æ¨¡å¼"><div class="cover" style="background: #fff"></div><div class="pagination-info"><div class="label">ä¸Šä¸€ç¯‡</div><div class="prev_info">é—¨é¢æ¨¡å¼&amp;é€‚é…å™¨æ¨¡å¼&amp;æ³¨å†Œå™¨æ¨¡å¼</div></div></a></div></nav></div><div class="aside-content" id="aside-content"><div class="card-widget card-info"><div class="is-center"><div class="avatar-img"><img src="/image/avatar.jpg" onerror="this.onerror=null;this.src='/img/friend_404.gif'" alt="avatar"/></div><div class="author-info__name">yasmin1024</div><div class="author-info__description">åŒç¦å®¢æ ˆï¼Œæˆ‘æ¢¦ä¸­çš„ç†æƒ³æ¸¯æ¹¾</div></div><div class="card-info-data site-data is-center"><a href="/archives/"><div class="headline">æ–‡ç« </div><div class="length-num">3</div></a><a href="/tags/"><div class="headline">æ ‡ç­¾</div><div class="length-num">8</div></a><a href="/categories/"><div class="headline">åˆ†ç±»</div><div class="length-num">1</div></a></div><div class="card-info-social-icons is-center"><a class="social-icon" href="https://github.com/yasmin1024" target="_blank" title="Github"><i class="fab fa-github" style="color: #24292e;"></i></a><a class="social-icon" href="mailto:jinyi_0612@163.com" target="_blank" title="Email"><i class="fas fa-envelope" style="color: #4a7dbe;"></i></a></div></div><div class="card-widget card-announcement"><div class="item-headline"><i class="fas fa-bullhorn fa-shake"></i><span>å…¬å‘Š</span></div><div class="announcement_content">é‚£å’‹ä¸å«åŒéš¾å®¢æ ˆå‘¢  ğŸ‘»<br> é‚£è°æ˜¯ä¸ƒä¾ é•‡ä¸€å¦ˆå‘¢  ğŸ‘»<br> é‚£æœ€åæ‰“ä¸ŠæŠ˜æ²¡å•Š  ğŸ‘»<br> ä½ è¦èµ·é£å•Š  ğŸ‘»</div></div><div class="sticky_layout"><div class="card-widget" id="card-toc"><div class="item-headline"><i class="fas fa-stream"></i><span>ç›®å½•</span><span class="toc-percentage"></span></div><div class="toc-content"><ol class="toc"><li class="toc-item toc-level-1"><a class="toc-link" href="#1-%E4%BD%BF%E7%94%A8Maven%E6%9E%84%E5%BB%BA%E5%A4%9A%E6%A8%A1%E5%9D%97%E9%A1%B9%E7%9B%AE"><span class="toc-number">1.</span> <span class="toc-text">1.ä½¿ç”¨Mavenæ„å»ºå¤šæ¨¡å—é¡¹ç›®</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#1-1-%E5%88%9B%E5%BB%BA%E7%88%B6maven%E5%B7%A5%E7%A8%8B"><span class="toc-number">1.1.</span> <span class="toc-text">1.1 åˆ›å»ºçˆ¶mavenå·¥ç¨‹</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#1-2-%E5%88%9B%E5%BB%BA%E5%AD%90%E6%A8%A1%E5%9D%97"><span class="toc-number">1.2.</span> <span class="toc-text">1.2 åˆ›å»ºå­æ¨¡å—</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#1-3-%E5%BB%BA%E7%AB%8B%E4%BE%9D%E8%B5%96"><span class="toc-number">1.3.</span> <span class="toc-text">1.3 å»ºç«‹ä¾èµ–</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#1-3-1-%E7%88%B6%E5%B7%A5%E7%A8%8Bpom-xml"><span class="toc-number">1.3.1.</span> <span class="toc-text">1.3.1 çˆ¶å·¥ç¨‹pom.xml</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#1-3-2-common%E5%AD%90%E6%A8%A1%E5%9D%97pom-xml"><span class="toc-number">1.3.2.</span> <span class="toc-text">1.3.2 commonå­æ¨¡å—pom.xml</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#1-3-3-dao%E5%AD%90%E6%A8%A1%E5%9D%97pom-xml"><span class="toc-number">1.3.3.</span> <span class="toc-text">1.3.3 daoå­æ¨¡å—pom.xml</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#1-3-4-ScheduleProject%E6%A8%A1%E5%9D%97pom-xml"><span class="toc-number">1.3.4.</span> <span class="toc-text">1.3.4 ScheduleProjectæ¨¡å—pom.xml</span></a></li></ol></li></ol></li><li class="toc-item toc-level-1"><a class="toc-link" href="#2-Mybatis-Druid%E5%AE%9E%E7%8E%B0%E5%A4%9A%E6%95%B0%E6%8D%AE%E6%BA%90%E7%9A%84%E5%8A%A8%E6%80%81%E5%88%87%E6%8D%A2"><span class="toc-number">2.</span> <span class="toc-text">2.Mybatis+Druidå®ç°å¤šæ•°æ®æºçš„åŠ¨æ€åˆ‡æ¢</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#2-1-Mybatis%E9%85%8D%E7%BD%AE"><span class="toc-number">2.1.</span> <span class="toc-text">2.1 Mybatisé…ç½®</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#2-2-%E5%AE%9E%E7%8E%B0Druid%E6%95%B0%E6%8D%AE%E6%BA%90%E5%B7%A5%E5%8E%82%E7%B1%BB"><span class="toc-number">2.2.</span> <span class="toc-text">2.2 å®ç°Druidæ•°æ®æºå·¥å‚ç±»</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#2-3-%E5%88%9D%E5%A7%8B%E5%8C%96Mybatis"><span class="toc-number">2.3.</span> <span class="toc-text">2.3 åˆå§‹åŒ–Mybatis</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#2-4-%E5%AE%9E%E7%8E%B0%E5%A4%9A%E6%95%B0%E6%8D%AE%E6%BA%90%E6%89%8B%E5%8A%A8%E5%88%87%E6%8D%A2"><span class="toc-number">2.4.</span> <span class="toc-text">2.4 å®ç°å¤šæ•°æ®æºæ‰‹åŠ¨åˆ‡æ¢</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#2-5-%E5%AE%9E%E7%8E%B0%E5%A4%9A%E6%95%B0%E6%8D%AE%E6%BA%90%E5%8A%A8%E6%80%81%E5%88%87%E6%8D%A2"><span class="toc-number">2.5.</span> <span class="toc-text">2.5 å®ç°å¤šæ•°æ®æºåŠ¨æ€åˆ‡æ¢</span></a></li></ol></li><li class="toc-item toc-level-1"><a class="toc-link" href="#3-Quartz%E5%AE%9A%E6%97%B6%E4%BB%BB%E5%8A%A1"><span class="toc-number">3.</span> <span class="toc-text">3.Quartzå®šæ—¶ä»»åŠ¡</span></a></li></ol></div></div><div class="card-widget card-recent-post"><div class="item-headline"><i class="fas fa-history"></i><span>æœ€æ–°æ–‡ç« </span></div><div class="aside-list"><div class="aside-list-item no-cover"><div class="content"><a class="title" href="/post/608baaff.html" title="Canal1.1.5æ— æ³•è¿æ¥åˆ°MySQL8çš„è§£å†³æ–¹æ¡ˆ">Canal1.1.5æ— æ³•è¿æ¥åˆ°MySQL8çš„è§£å†³æ–¹æ¡ˆ</a><time datetime="2023-05-05T08:10:22.000Z" title="å‘è¡¨äº 2023-05-05 16:10:22">2023-05-05</time></div></div><div class="aside-list-item no-cover"><div class="content"><a class="title" href="/post/7d755a85.html" title="é—¨é¢æ¨¡å¼&amp;é€‚é…å™¨æ¨¡å¼&amp;æ³¨å†Œå™¨æ¨¡å¼">é—¨é¢æ¨¡å¼&amp;é€‚é…å™¨æ¨¡å¼&amp;æ³¨å†Œå™¨æ¨¡å¼</a><time datetime="2023-05-01T02:02:57.000Z" title="å‘è¡¨äº 2023-05-01 10:02:57">2023-05-01</time></div></div><div class="aside-list-item no-cover"><div class="content"><a class="title" href="/post/b0798327.html" title="SpringBooté›†æˆMybatiså’ŒQuartzå®ç°é…ç½®å¤šæ•°æ®æºçš„å®šæ—¶è°ƒåº¦ä»»åŠ¡é¡¹ç›®">SpringBooté›†æˆMybatiså’ŒQuartzå®ç°é…ç½®å¤šæ•°æ®æºçš„å®šæ—¶è°ƒåº¦ä»»åŠ¡é¡¹ç›®</a><time datetime="2023-04-26T09:54:28.000Z" title="å‘è¡¨äº 2023-04-26 17:54:28">2023-04-26</time></div></div></div></div></div></div></main><footer id="footer"><div id="footer-wrap"><div class="copyright">&copy;2020 - 2023 By yasmin1024</div><div class="framework-info"><span>æ¡†æ¶ </span><a target="_blank" rel="noopener" href="https://hexo.io">Hexo</a><span class="footer-separator">|</span><span>ä¸»é¢˜ </span><a target="_blank" rel="noopener" href="https://github.com/jerryc127/hexo-theme-butterfly">Butterfly</a></div></div></footer></div><div id="rightside"><div id="rightside-config-hide"><button id="readmode" type="button" title="é˜…è¯»æ¨¡å¼"><i class="fas fa-book-open"></i></button><button id="darkmode" type="button" title="æµ…è‰²å’Œæ·±è‰²æ¨¡å¼è½¬æ¢"><i class="fas fa-adjust"></i></button><button id="hide-aside-btn" type="button" title="å•æ å’ŒåŒæ åˆ‡æ¢"><i class="fas fa-arrows-alt-h"></i></button></div><div id="rightside-config-show"><button id="rightside_config" type="button" title="è®¾ç½®"><i class="fas fa-cog fa-spin"></i></button><button class="close" id="mobile-toc-button" type="button" title="ç›®å½•"><i class="fas fa-list-ul"></i></button><button id="go-up" type="button" title="å›åˆ°é¡¶éƒ¨"><span class="scroll-percent"></span><i class="fas fa-arrow-up"></i></button></div></div><div><script src="/js/utils.js"></script><script src="/js/main.js"></script><script src="https://cdn.jsdelivr.net/npm/@fancyapps/ui/dist/fancybox/fancybox.umd.min.js"></script><script src="https://cdn.jsdelivr.net/npm/instant.page/instantpage.min.js" type="module"></script><div class="js-pjax"></div></div></body></html>